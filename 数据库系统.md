# 数据库系统

## 三级模式-两级映射

模式

+ 外模式-用户级数据库-用户视图

+ 概念模式-概念级数据库-DBA数据库

+ 内模式-物理级数据库-内部视图

映射

+ 外模式-概念模式映射

+ 概念模式-内模式映射

## 设计流程

+ 需求分析
  
  + 数据流图
  
  + 数据字典
  
  + 需求说明书

+ 概念结构设计
  
  + ER模型

+ 逻辑结构设计
  
  + 转换规则、规范化理论
  
  + 关系模式

+ 物理设计
  
  + DBMS特征
  
  + 硬件、OS特性

## ER模型

 图示

+ 方框-实体

+ 椭圆-属性

+ 菱形-联系

ER模型转关系模式

+ 一个实体模型转换为一个关系模式
  
  + 1:1
    
    + 联系可以转换成一个关系模式，也可以放入与之关联的任意一个实体中
  
  + 1:n
    
    + 联系可以转换成一个关系模式，也可以放入与之关联的、多的实体中
  
  + m:n
    
    + 联系必须转换成一个关系模式

+ 三个以上实体间的一个多元联系

## 关系代数

运算类型

+ 并 相同内容只显示一次

+ 交 找出公共部分

+ 差 S1-S2，S1有但S2没有

+ 笛卡尔积

+ 投影 选列

+ 选择 选行

+ 联接 都有的字段只保留一个
  
  + 没有写条件就是自然联接，也就是相同的字段做等值

## 规范化理论

函数依赖

+ 部分函数依赖
  
  + 主键是组合键，主键中的一部分可以确定非主属性

+ 传递依赖

价值与用途

非规范化的关系范式，可能存在的问题包括

+ 数据冗余

+ 更新异常

+ 插入异常

+ 删除异常

键

+ 超键 唯一标识元祖

+ 候选键 超键消除多余属性

+ 主键 候选键任选一个

+ 外键 其他关系的主键

范式

+ 1NF
  
  + 属性值都是不可分的原子值

+ 2NF
  
  + 消除非主属性对候选键的部分依赖

+ 3NF
  
  + 消除非主属性对候选键的传递依赖

+ BCNF
  
  + 消除主属性对候选键的传递依赖
  + 把函数依赖全部写出，依赖的左边必须全部是候选键

模式分解

+ 保持函数依赖分解

+ 无损分解
